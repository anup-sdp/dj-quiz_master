{% extends "base.html" %}
{% block title %}Take Quiz: {{ quiz.title }} - QuizMaster{% endblock %}
{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <h1 class="text-3xl font-bold mb-4">{{ quiz.title }}</h1>
        <p class="text-gray-700 mb-4">{{ quiz.description }}</p>
        <div class="text-gray-600">{{ total_questions }} questions</div>
    </div>
    
    <div class="bg-white rounded-lg shadow-md p-6">
        <!-- Progress indicator -->
        <div class="mb-6">
            <div class="flex justify-between items-center mb-2">
                <span class="text-sm font-medium text-gray-700">Progress</span>
                <span class="text-sm font-medium text-gray-700">Question {{ current_question }}/{{ total_questions }}</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2.5">
                <div class="bg-blue-600 h-2.5 rounded-full progress-bar" data-width="{{ progress }}"></div>
            </div>
        </div>
        
        <form method="post" action="{% url 'quiz-take' quiz.pk %}">
            {% csrf_token %}
            <div class="mb-6">
                <h3 class="text-xl font-semibold mb-4">{{ question.text }}</h3>
                <div class="space-y-3">
                    {% for choice in form.answer %}
                        <div class="flex items-center p-3 border rounded-lg hover:bg-gray-50">
                            {{ choice.tag }}
                            <label for="{{ choice.id_for_label }}" class="ml-3 cursor-pointer">{{ choice.choice_label }}</label>
                        </div>
                    {% endfor %}
                </div>
            </div>
            
            <div class="flex justify-between mt-8">
                {% if current_question > 1 %}
                    <a href="{% url 'quiz-take' quiz.pk %}?previous=true" class="btn btn-outline">Previous</a>
                {% else %}
                    <div></div> <!-- Empty div for spacing -->
                {% endif %}
                
                <button type="submit" class="btn btn-primary">
                    {% if current_question == total_questions %}
                        Submit Quiz
                    {% else %}
                        Next
                    {% endif %}
                </button>
            </div>
        </form>
    </div>
</div>

<style>
    .progress-bar {
        width: 0%;
        transition: width 0.5s ease-in-out;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const progressBars = document.querySelectorAll('.progress-bar');
        progressBars.forEach(bar => {
            const width = bar.getAttribute('data-width');
            setTimeout(() => {
                bar.style.width = width + '%';
            }, 100);
        });
    });
</script>
{% endblock %}